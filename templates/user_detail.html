{% extends 'base.html' %}
{% block content %}

  <h3>Welcome, {{user.name}}!</h3> 

 <h2>Your Hike List</h2>


 <div class='hike-div'>
    {% if user.usertrails|length == 0 %}
    <h4>No Hikes yet.</h4>
    {% else %}
      
        <div class="container-fluid">
            <table class="table table-hover">
                <tr>
                    <th>Trail Name</th>
                    <th>Trail URL</th> 
                    <th>Trail Length (miles) </th>
                    <th>Date</th>
                    <th>Comments</th>
                </tr>
                
                {% for usertrail in user.usertrails %}
                <tr>
                    <td>{{usertrail.trail.name}}</td>
                    <td><a href= "">{{usertrail.trail.url}}</a></td>
                    <td>{{usertrail.trail.length}}</td>
                    <td>{% for hike in usertrail.hikes %}
                            {{hike.date}}
                        {% endfor %}</td>
                    <td>{% if usertrail.trail.trailattrs|length == 0 %}
                            <span class="comment-span">
                            <input type="text" name="comments" placeholder"add your comments here" id="comments">
                            <button id="comment-it" data-trail-id="{{ usertrail.trail.trail_id }}">Add</button>
                            </span><br>
                        {% endif %}</td>

                </tr>
                {% endfor %}
                
            </table>
    </div>
      
    {% endif %}
 </div>


<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
  "use strict";

  function showInfo(results){
    console.log("hi")
    
  }

  function getInfo(evt){
    evt.preventDefault();
    

    let comments = $(this).parent().val()

    console.log(comments)

    console.log("hi")
    
    var formInputs = {
        "trail_id": $(this).data('trail-id'),
        "comments": comments
    }

    
    $.post("/get-trails-comment",formInputs, showInfo);
  }

  $("#comment-it").on('click', getInfo);

</script>

{% endblock %}

